{"version":3,"file":"index.min.js","sources":["../src/modules/fs.js","../src/modules/cms.js","../src/index.js"],"sourcesContent":["const path = require('path')\r\nconst fse = require('fs-extra')\r\n\r\nexport default {\r\n  getFiles (_path) {\r\n    return new Promise((resolve, reject) => {\r\n      fs.readdir(path.normalize(_path), (error, files) => {\r\n        if (!error) {\r\n          const results = []\r\n          files.forEach(file => {\r\n            results.push(path.normalize(_path, file))\r\n          })\r\n          resolve(results.reverse())\r\n        } else {\r\n          reject(error)\r\n        }\r\n      })\r\n    })\r\n  },\r\n  readFile (_path) {\r\n    return new Promise((resolve, reject) => {\r\n      fs.readFile(path.normalize(_path), 'utf8', (error, data) => {\r\n        if (!error) {\r\n          resolve(data)\r\n        } else {\r\n          reject(error)\r\n        }\r\n      })\r\n    })\r\n  },\r\n  // method below source: https://geedew.com/remove-a-directory-that-is-not-empty-in-nodejs/\r\n  deleteFolder: (_path) => {\r\n    if (fs.existsSync(_path)) {\r\n      fs.readdirSync(_path).forEach(file => {\r\n        const currentPath = path.normalize(_path, file)\r\n        if(fs.lstatSync(currentPath).isDirectory()) { // recurse\r\n          module.exports.deleteFolder(path.normalize(currentPath))\r\n        } else { // delete file\r\n          fs.unlinkSync(currentPath)\r\n        }\r\n      })\r\n      fs.rmdirSync(_path)\r\n    }\r\n  },\r\n  copyFolder (_sourcePath, _targetPath) {\r\n    return new Promise((resolve, reject) => {\r\n      fse.copy(path.normalize(_sourcePath), path.normalize(_targetPath)).then(() => {\r\n        resolve()\r\n      }).catch(err => {\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n}","export default class Cms{\r\n  constructor (options) {\r\n    this.fs = options.fs\r\n    this.configUrl = options.configUrl\r\n    this.parser = options.parser\r\n    this.config = options.config\r\n  }\r\n\r\n  getConfig () {\r\n    if (this.configUrl && this.configUrl.length) {\r\n      this.fs.readFile(this.configUrl).then(configData => {\r\n        this.config = configData\r\n      })\r\n    } else {\r\n      throw new Error('Config URL has not been provided.')\r\n    }\r\n  }\r\n}\r\n","import fs from './modules/fs.js'\r\nimport Cms from './modules/cms.js'\r\n\r\nexport default class Writteli {\r\n  constructor (options) {\r\n    // abstract class check\r\n    if (new.target === Writteli) {\r\n      throw new Error('Cannot instantiate Base Class')\r\n    }\r\n    this.parse = {\r\n      content: options.parseContent,\r\n      template: options.parseTemplate\r\n    }\r\n    this.fs = fs\r\n    this.configUrl = options.configUrl\r\n    this.config = ''\r\n    this.cms = new Cms({\r\n      configUrl: options.configUrl,\r\n      fs: options.fs,\r\n      parser: {\r\n        content: options.contentParser,\r\n        template: options.templateParser\r\n      },\r\n      config: this.config\r\n    })\r\n  }\r\n}\r\n"],"names":["path","require","fse","getFiles","_path","Promise","resolve","reject","fs","readdir","normalize","error","files","results","forEach","file","push","reverse","readFile","data","deleteFolder","existsSync","readdirSync","currentPath","lstatSync","isDirectory","module","exports","unlinkSync","rmdirSync","copyFolder","_sourcePath","_targetPath","copy","then","err","Cms","options","configUrl","parser","config","this","length","Error","configData","_this","Writteli","parse","content","parseContent","template","parseTemplate","cms","contentParser","templateParser"],"mappings":"8SAAA,IAAMA,EAAOC,QAAQ,QACfC,EAAMD,QAAQ,cAEL,CACbE,kBAAUC,UACD,IAAIC,QAAQ,SAACC,EAASC,GAC3BC,GAAGC,QAAQT,EAAKU,UAAUN,GAAQ,SAACO,EAAOC,MACnCD,EAOHJ,EAAOI,OAPG,KACJE,EAAU,GAChBD,EAAME,QAAQ,SAAAC,GACZF,EAAQG,KAAKhB,EAAKU,UAAUN,EAAOW,MAErCT,EAAQO,EAAQI,iBAOxBC,kBAAUd,UACD,IAAIC,QAAQ,SAACC,EAASC,GAC3BC,GAAGU,SAASlB,EAAKU,UAAUN,GAAQ,OAAQ,SAACO,EAAOQ,GAC5CR,EAGHJ,EAAOI,GAFPL,EAAQa,QAQhBC,aAAc,SAAChB,GACTI,GAAGa,WAAWjB,KAChBI,GAAGc,YAAYlB,GAAOU,QAAQ,SAAAC,OACtBQ,EAAcvB,EAAKU,UAAUN,EAAOW,GACvCP,GAAGgB,UAAUD,GAAaE,cAC3BC,OAAOC,QAAQP,aAAapB,EAAKU,UAAUa,IAE3Cf,GAAGoB,WAAWL,KAGlBf,GAAGqB,UAAUzB,KAGjB0B,oBAAYC,EAAaC,UAChB,IAAI3B,QAAQ,SAACC,EAASC,GAC3BL,EAAI+B,KAAKjC,EAAKU,UAAUqB,GAAc/B,EAAKU,UAAUsB,IAAcE,KAAK,WACtE5B,YACO,SAAA6B,GACP5B,EAAO4B,SCjDMC,wBACNC,kBACN7B,GAAK6B,EAAQ7B,QACb8B,UAAYD,EAAQC,eACpBC,OAASF,EAAQE,YACjBC,OAASH,EAAQG,iFAIlBC,KAAKH,YAAaG,KAAKH,UAAUI,aAK7B,IAAIC,MAAM,0CAJXnC,GAAGU,SAASuB,KAAKH,WAAWJ,KAAK,SAAAU,GACpCC,EAAKL,OAASI,gDCPpB,WAAaP,8DAEQS,QACX,IAAIH,MAAM,sCAEbI,MAAQ,CACXC,QAASX,EAAQY,aACjBC,SAAUb,EAAQc,oBAEf3C,GAAKA,OACL8B,UAAYD,EAAQC,eACpBE,OAAS,QACTY,IAAM,IAAIhB,EAAI,CACjBE,UAAWD,EAAQC,UACnB9B,GAAI6B,EAAQ7B,GACZ+B,OAAQ,CACNS,QAASX,EAAQgB,cACjBH,SAAUb,EAAQiB,gBAEpBd,OAAQC,KAAKD"}