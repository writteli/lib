this.writteli_lib=function(){"use strict";function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=require("path"),c=require("fs-extra"),e={$path:s,getFiles:function(r){return new Promise(function(i,o){fs.readdir(s.normalize(r),function(t,n){if(t)o(t);else{var e=[];n.forEach(function(t){e.push(s.normalize(r,t))}),i(e.reverse())}})})},readFile:function(t){return new Promise(function(e,i){fs.readFile(s.normalize(t),"utf8",function(t,n){t?i(t):e(n)})})},deleteFolder:function(e){fs.existsSync(e)&&(fs.readdirSync(e).forEach(function(t){var n=s.normalize(e,t);fs.lstatSync(n).isDirectory()?module.exports.deleteFolder(s.normalize(n)):fs.unlinkSync(n)}),fs.rmdirSync(e))},copyFolder:function(e,i){return new Promise(function(t,n){c.copy(s.normalize(e),s.normalize(i)).then(function(){t()}).catch(function(t){n(t)})})}},i=function(){function n(t){o(this,n),this.fs=t.fs,this.configUrl=t.configUrl,this.parser=t.parser,this.cache={listEntryLayouts:{},listEntries:{}},this.config=""}var t,e,i;return t=n,(e=[{key:"getConfig",value:function(){var n=this;if(!this.configUrl||!this.configUrl.length)throw new Error("Config URL has not been provided.");this.fs.readFile(this.configUrl).then(function(t){n.config=t})}},{key:"getPages",value:function(){var n=this;if(!this.config)throw new Error("Config file has not been loaded yet.");if(this.config&&this.config.content&&this.config.content.pages&&Object.keys(this.config.content.pages).length)return Object.keys(this.config.content.pages).map(function(t){return n.config.content.pages[t]});throw new Error("Pages definition is missing in config file.")}},{key:"getPageData",value:function(t){if(!this.config)throw new Error("Config file has not been loaded yet.");if(this.config&&this.config.content&&this.config.content.pages&&this.config.content.pages[t]){var n=this.config.content.pages[t],e=this.fs.$path.normalize(this.config.content.src,n.content),i=this.fs.$path.normalize(this.config.theme.url,n.layout);return{content:this.fs.readFile(e),layout:this.fs.readFile(i)}}throw new Error("There is no such page as ".concat(t,"."))}},{key:"getListSingleEntryData",value:function(t,n){if(!this.config)throw new Error("Config file has not been loaded yet.");if(this.config&&this.config.content&&this.config.content.pages&&this.config.content.pages[n]&&"list"===this.config.content.pages[n].type){var e=this.config.content.pages[n],i=this.fs.$path.normalize(this.config.content.src,e.entry.content),o={content:this.fs.readFile(i)};if(this.cache.listEntryLayouts[n])o.layout=this.cache.listEntryLayouts[n];else{var r=this.fs.$path.normalize(this.config.content.src,e.entry.layout),s=this.fs.readFile(r);o.layout=s}return o}throw new Error("There is no such list page as ".concat(n,"."))}}])&&r(t.prototype,e),i&&r(t,i),n}();return function t(n){if(o(this,t),(this instanceof t?this.constructor:void 0)===t)throw new Error("Cannot instantiate Base Class");this.parser={content:n.parseContent,template:n.parseTemplate},this.fs=e,this.configUrl=n.configUrl,this.cms=new i({configUrl:n.configUrl,fs:n.fs,parser:{content:this.parser.content,template:this.parser.template,async:this.parser.async}})}}();//# sourceMappingURL=index.min.js.map
